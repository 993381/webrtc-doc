## H.323目的
H.323的设计主要目标是：在分组交换网络上为电话会议提供语音，视频和数据容量。

H.323的不断研究和开发遵循相同的目的。此外，H.323和语音，视频和数据的融合使服务提供商可以为用户提供新的设施，并为用户提高性能，从而降低成本。

该标准是专门为实现以下目标而设计的：

·基于现有标准，包括H.320，RTP和Q.931
·添加分组交换网络提供的一些优点，以传输实时数据
·解决分组交换网络上实时数据的问题

H.323的设计者知道，通信的需求在一个地方到另一个地方，用户之间以及公司之间是不同的，并且显然未来应用程序的需求也会发生变化。因此，H.323的设计者以这样一种方式定义它：制造设备的公司可以在协议中添加自己的规范，并可以定义其他结构和标准，以使设备获得新的功能或能力。

## H.323组件
H.323是用于在基于分组交换的网络上传输实时音频，视频和数据信息的协议。这样的网络包括基于IP的网络（包括Internet），基于Internet分组交换的局域网，企业网络以及城域网和广域网。H.323也可以应用于多点多媒体通信。该技术提供了广泛的服务，这意味着它可以用于消费者，企业和娱乐应用。H.323是确保随着第三代无线技术的实施而引入移动多媒体应用程序和服务的兼容性的基本要素。第16研究组在ITU-T组织内部指定了H.323标准。原始标准于1996年实现，并在随后的几年中开发了进一步的增强功能，直至版本3。

H.323使用有关H.245标准的逻辑信道信令的过程，其中在打开每个信道时定义每个信道的内容。提供这些过程是为了固定呼叫者和接收者的利益，呼叫建立，信息交换，呼叫进行以及如何对呼叫进行编码和解码。例如，当电话呼叫来自Internet时，两个终端必须协商哪个控制权，以便只有其中一个可以发送特殊控制消息。重要的一点是要确定系统的功能，因此，如果接收方无法管理信息，则不会传输信息。

该标准定义了许多特性和功能。有些是必需的，而另一些是可选的。但是H.323定义了更多的功能。该标准还定义了以下组件：

### 1.终端

H.323终端是LAN中参与实际通信的终结点与另一个H.323终端，网关或多点控制单元（MCU）的实时双向通信。终端必须支持音频通信，还必须支持带视频的音频，带数据的音频或这三者的组合。

H.323终端选项包括支持的用户设备接口，音频和视频编解码器，T.120数据协议，MCU功能以及称为RAS（注册/准入/状态）的H.225组件，该组件是用于与网闸通信的协议。

- 用户设备接口:一组摄像头,屏幕,麦克风,扬声器和数据应用与各自的接口。

- 音频编解码器：每个终端都将具有一个音频编解码器，以对语音信号进行编码和解码（G.711），并且它们可以发送和接收a-law和μ-law。可选地，终端可以对声音信号进行编码和解码。H.323终端还可以选择同时发送一个音频通道，例如，以便传输两种不同的语言

- 视频编解码器：在H.323中，终端是可选的。

- 数据通道：一个或多个数据通道是可选的。它们可以是一个方向，也可以是两个方向。

- 接收路径延迟：它包括添加到数据包中的延迟，以保持同步，并考虑数据包到达时的波动。通常，它不用于发送，而是用于接收，以增加必要的等待时间，例如，在视频会议中获得嘴唇的运动与音频信号之间的同步。

- 系统控制单元：给出终端信令。有三种不同的功能：H.245控制功能，H.225呼叫信令功能和RAS信令功能。

- H.245控制功能：H.245逻辑信道用于接收H.323协议的端到端消息。协商容量（带宽），设置和设置逻辑通道以及发送流控制消息时要格外小心。在每个呼叫中​​，每种类型的任何数量（包括音频，视频或数据）逻辑通道，但只有一个控制逻辑通道，通道0。

- H.225呼叫信令功能：它使用一个逻辑信令通道在两个H.323端点之间发送和接收建立和结束会话消息。该信道独立于H.245控制信道。H.245逻辑信道打开和关闭过程不用于建立信令信道。在建立H.245控制信道和任何其他逻辑信道之前将其打开。它可以在终端到终端或终端到网守之间安顿下来。

- RAS控制功能（注册，准入，状态）：它使用RAS信令的逻辑通道在端点（终端，网关..）和网守之间执行注册，准入，情况和带宽更改过程。仅当存在网守时使用。RAS信令信道独立于呼叫信令信道以及H.245控制信道。H.245逻辑信道的打开和关闭过程不用于建立RAS信令信道。在建立任何其他逻辑通道

- H225层：它负责为视频、音频和传输的数据包提供格式。此外，它还负责包对齐、序列号和错误检测。

- 分组网络接口：它是每个实现的专用。这必须提供H.225建议中描述的服务。这意味着对于H.245控制信道，数据信道和呼叫信令信道，可靠的端到端服务（例如TCP）是必需的。
对于音频通道，视频通道和RAS通道，必须强制使用非可靠的端到端服务（UDP，IPX）。这些服务可以是双工或单工，也可以是单播或多播，具体取决于应用程序，终端容量和网络组态。

### 2.网关
这些设备提供许多服务，包括LAN上的H.323会议端点与其他符合ITU的电路交换和分组交换网络上的其他ITU兼容终端之间所需的转换功能。这些服务包括传输格式（例如H.225.0到H.221）之间以及通信过程之间的转换（例如H.245到H.242）。此外，如果需要，网关还会在音频和视频编解码器之间进行转换，并执行呼叫建立和清除。

### 3.网闸
 关守执行两个重要的呼叫控制内务处理，这有助于维护公司数据网络的完整性。首先是终端和网关的LAN别名与IP或IPX地址之间的地址转换服务。第二个网闸功能是带宽管理。例如，如果达到了LAN管理员为LAN上同时举行的会议数量指定的阈值，则网闸可以拒绝建立更多连接。效果是将会议位数/秒限制为可用总数的一部分。其余的用于电子邮件，文件传输和其他正常的存储转发数据功能。由单个网守管理的所有终端，网关和多点控制单元的集合称为H.323区域。

如果有网闸，则它会提供以下服务（并非总是必要）：

·准入控制：网闸可以拒绝来自终端的呼叫，因为他们在当天或其他时间没有权限或没有权限。标准。准入控制也可以是一个空函数，它接受所有请求。
·带宽控制：控制可以同时连接的H.323终端的数量，如果带宽太低，则拒绝呼叫。
·区域管理：网守为已在其控制区域内注册的终端，MCU和网关提供上述功能。

### 4.MCU
MCU是LAN上的一个端点，它提供了三个或更多终端和网关参加多点会议的功能。它控制并混合来自终端的视频，音频和数据，以创建强大的视频会议。MCU还可以在点对点会议中连接两个终端，这些终端以后可以发展为多点会议。

### 5.多点控制器
多点控制器多点控制器是H.323的组件，它与所有终端提供协商能力以执行不同的通信级别。而且，它可以控制会议资源，例如视频多播。

### 6.多点处理器
多点处理器是H.323的硬件和专用软件组件。它为多点会议的参与者混合，交换和处理音频，视频和/或数据流，其方式使得终端处理器不会被大量使用。根据支持的会议，多点处理器只能处理一个平均流量或多个平均流量。

### 7. PROXY H.323
H.323代理服务器是专门为H.323协议设计的代理，它检查两个通信应用程序之间的数据包。代理能够确定呼叫的目的地并在必要时执行呼叫连接步骤。

H.323代理执行以下关键功能：
·不支持资源预留协议（RSVP）的语音终端可以通过远程访问或具有相对可靠的服务质量（QoS）的局域网（LAN）连接到代理。然后可以使用成对的代理在IP网络上建立隧道。
·代理支持使用特定于应用程序的路由（ASR）将H.323通信与普通数据通信分开路由。
·代理与网关或网守中的网络地址转换功能兼容，使H.323可以使用专用地址空间部署在网络中。

<details>
      <summary><b>H.323协议栈</b></summary>
      在H.323中使用的最知名的协议是：

- RTP / RTCP（实时传输协议/实时传输控制协议）：Internet标准的协议，用于实时数据，包括音频和视频的传输。RTP实际上用于所有IP电话语音体系结构中，用于视频会议，点播媒体和其他应用程序。瘦协议，它支持内容识别，时序重建和丢失数据包的检测。

- RAS（注册，允许和状态）：一种用于注册，允许和状态协议。在H.323音频或视频系统中，RAS是控制信道，通过该控制信道发送H.225.0信令消息。

- H225.0：协议用于描述呼叫信令，媒体（音频和视频），则流分组，媒体流同步和控制消息格式

- H.245：多媒体通信控制协议，描述了用于开口消息和过程和关闭逻辑信道音频，视频和数据，功能交换，控制和指示

它管理以下功能：

1，功能互换：终端定义它们拥有的编解码器，并将其发送到另一个端点。
2，打开和关闭逻辑通道：H.323音频和视频通道是点对点和单向的。因此，他们将不得不创建至少两个这样的渠道。这是H.245的责任。
3，流量控制时出现问题。
4，很多不同的小功能。

- Q.931：一种用于呼叫信令协议，其由安装，拆卸和脱离的。Q.931包含在H.225.0建议

- RSVP（资源预留协议）协议预留网络资源，提供保证应用的QoS（服务质量）

- T.120：标准数据会议和交互式多媒体通信会议控制-多点和点对点。

H.323标准建议使用以下编解码器：

·G.711：ITU-TSS建议“语音频率的脉冲编码调制（PCM）”。所有视频会议系统都必须使用此音频标准。它需要56或64 kbit / s的数据速率。

·H.261y H.263： H.323标准的视频编解码器。但是，也可以使用其他的。
</details>

<details>
      <summary><b>H.323信令</b></summary>
     信令功能基于H.225建议，该建议规定了Q.931 / Q932信令消息的使用和支持。呼叫由TCP在端口1720发送。在此端口上，发送Q.931控制呼叫消息以进行呼叫建立，维护和断开连接。

最常见的Q.931 / Q.932消息是：

- 设置。发送它以发起H.323呼叫或与H.323终端建立连接。此信息包含主叫用户的IP地址，端口和别名，或被叫用户的IP地址和端口。

- 呼叫处理。一旦分析了被叫号码，网闸会将其发送给终端警告，以警告尝试建立呼叫。

- 提醒。指示音调生成阶段的开始。

- 连接。指示连接的开始。

- 发布完成。由终端发送以启动断开连接。

- 设施。它是Q.932标准的消息，用作附加服务的请求。

H.245控制功能

H.245控制功能是一组用于呼叫建立和控制的ASN.1消息。主要消息是：

• MasterSlaveDetermination（MSD）。该消息用于防止要启动该过程的两个终端之间的冲突。它决定哪一个将是主机和从机。

•TerminalCapabilitySet（TCS）。参与呼叫的终端所支持的消息功能

• OpenLogicalChannel（OLC）。打开逻辑通道的消息，其中包含允许接收和编码数据的信息。它包含将要发送的数据类型的信息。

• CloseLogicalChannel（CLC）。关闭信息逻辑通道的消息。

</details>


<details>
      <summary><b>H.323范例</b></summary>
      在下面的示例中，我们可以看到一个H.323呼叫。不同的颜色显示不同的协议。

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200820165743890.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI4ODgwMDg3,size_16,color_FFFFFF,t_70#pic_center)
     

      一个H.323呼叫有4个不同的过程：

1.设置

- 终端1使用RAS协议（寄存器，协议，状态）向网守注册自己，以发送ARQ消息并接收ACF消息。
-使用H.225协议（用于建立和释放呼叫），终端T1将SETUP消息发送到T2，以请求连接。该消息包含主叫用户的IP地址，端口和别名，或被叫用户的IP地址和端口。
- T2在尝试建立呼叫发送一个CALL PROCEEDING消息警告
现在， - T2终端必须注册为T1先前做本身在看门人。
-警报消息指示音调生成阶段的开始。
-最后，CONNECT消息显示连接的开始。

2.控制信令

在此阶段，将打开使用H.245协议的协商（会议控制），两个终端之间的消息交换（请求和答复）确定谁将成为主方，谁是从方，以及参与者的能力。以及要使用的音频和视频编解码器。协商完成后，将打开通信通道（IP地址，端口）。

在该步骤中使用的主要的H.245消息是：
- 终端能力（TCS）。由参与在呼叫终端支持的消息的能力
- 开放逻辑信道（OLC） 。打开逻辑通道的消息，其中包含允许接收和编码数据的信息。它包含将要发送的数据类型的信息。

3. AUDIO
终端使用RTP / RTCP协议开始通信。

4.呼叫释放
-被叫或被叫终端可以使用CloseLogicalChannel和EndSessionComand消息启动结束过程，以再次使用H.245完成呼叫。
-然后使用H.225，通过RELEASE COMPLETE消息关闭连接。
-最后，使用RAS协议清除网守中终端的注册。
</details>
